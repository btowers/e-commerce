"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[416],{8416:(e,t,s)=>{s.r(t),s.d(t,{default:()=>q});var n=s(3673),a=s(2323),o=s(8880);const l={class:"q-pa-md"},c={class:"q-my-md",style:{width:"100%"}};function u(e,t,s,u,d,r){const m=(0,n.up)("q-chat-message"),g=(0,n.up)("q-scroll-area"),i=(0,n.up)("q-input"),p=(0,n.up)("q-btn"),h=(0,n.up)("q-card"),k=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(k,{class:"flex flex-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,null,{default:(0,n.w5)((()=>[(0,n._)("div",l,[(0,n.Wm)(g,{style:{height:"350px",width:"800px"}},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.messages,((e,t)=>((0,n.wg)(),(0,n.j4)(m,{key:t,sent:e.sent},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.text),1)])),_:2},1032,["sent"])))),128))])),_:1}),(0,n._)("div",c,[(0,n.Wm)(i,{modelValue:d.text,"onUpdate:modelValue":t[0]||(t[0]=e=>d.text=e),outlined:"",onKeyup:(0,o.D2)(r.sendMessage,["enter"])},null,8,["modelValue","onKeyup"]),(0,n.Wm)(p,{class:"q-mt-md",onClick:r.sendMessage,color:"primary",label:"Enviar",loading:d.btnLoading},null,8,["onClick","loading"])])])])),_:1})])),_:1})}const d={name:"Chat",data(){return{text:"",btnLoading:!1}},created(){this.$socket.emit("messageRequest",{token:localStorage.getItem("token")})},computed:{messages(){const e=this.$store.state.chat.messages.map((e=>({sent:e.sent,text:e.text})));return e}},methods:{sendMessage(){console.log("SENDING MESSAGE"),console.log(localStorage.getItem("token")),this.$store.commit("chat/newMessage",{text:this.text,sent:!0});const e={text:this.text,token:localStorage.getItem("token")};this.$socket.emit("new-message",e),this.text=""}}};var r=s(4260),m=s(4379),g=s(151),i=s(7704),p=s(629),h=s(4842),k=s(8240),x=s(7518),w=s.n(x);const f=(0,r.Z)(d,[["render",u]]),q=f;w()(d,"components",{QPage:m.Z,QCard:g.Z,QScrollArea:i.Z,QChatMessage:p.Z,QInput:h.Z,QBtn:k.Z})}}]);